.cell.feed
  %h5.feed-title 
    Welcome
    =current_user.email
    
.cell.feed
  %h5.feed-title Preferences
  
.cell.feed
  %h5.feed-title Feeds
  
  %ul#user-feeds
    - @current_feed_order.each do |feeditem|
      %li{ :data => {:id => feeditem.id} }
        =feeditem.feed_title
  
  %div#trash      
    %span Drag Here to delete feed
  
  %form.playlistorder{:method=>"post", :action=>"/save-order"}
    
    %input#neworder{:type=>"hidden", :name => 'order[]', :value => '' }
    
    %input#trashit{:type=>"hidden", :name => 'trash[]', :value => '' }
    
    
    %button{:type=>"submit"} Update Playlist Order
     


%script{:src => "/js/Sortable.min.js"}
:javascript
  var el = document.getElementById('user-feeds');
  new Sortable(el, { group: 'orderit' });
  
  var elt = document.getElementById('trash');
  new Sortable(elt, { group: 'orderit' });

  $('.playlistorder').submit( function() {
    
    var feedorder = [];
    var trashit = [];
    
    $('#user-feeds li').each(function( index ) {
      feedorder.push( $(this).data( 'id' ) );
    });
    
    $('#trash li').each(function( index ) {
      trashit.push( $(this).data( 'id' ) );
    });
    
    $('#neworder').val( feedorder );
    $('#trashit').val( trashit );
    
    return true;
    
  });
  
